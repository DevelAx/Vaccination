"use strict";(function(){function n(){function h(n,t){n.addEventListener("input",t);n.addEventListener("propertychange",t);$(n).keypress(function(n){var t=n.keyCode?n.keyCode:n.which;t===13&&(clearTimeout(r),i())})}function c(){clearTimeout(r);r=setTimeout(i,2e3)}function i(){p();var n={fullName:o.value,insuranceNumber:s.value,searchId:f++,page:t-1};$.get(a,n).done(function(n){n.searchId===f-1&&(w(n.patients.length),t=n.pageNumber+1,v.mirandajs(n.patients),y.mirandajs(n.pages.length<2?[]:n.pages),b(n),k(),d())})}function p(){n.css("color","red");e.text("Отправка запроса ");n.text("");u=setInterval(function(){var t=n.text();t.length<8?n.text(t+"."):n.text("")},250)}function w(t){n.css("color","black");clearInterval(u);n.text("");e.text("Найдено: "+t)}function b(n){l.text("Страница "+(n.pageNumber+1)+" из "+n.pages.length)}function k(){$(".clickable-row").click(function(){window.location=$(this).data("href")})}function d(){var n=$(".page-item:nth-child("+t+")");n.addClass("disabled");$(".page-item").click(function(){var n=$(this);t=parseInt(n.text());i()})}var r,u,f=0,t=1,l=$("#page-info"),e=$("#searchState"),n=$("#searchProgress"),a=document.querySelector("#getPatientsUrl").value,v=$("#patients-list"),y=$("#pagination"),o=document.querySelector("#fullNameSearch"),s=document.querySelector("#insuranceNumberSearch");h(o,c);h(s,c);i()}n()})();