@model Vaccination.App.CQRS.Patients.Queries.GetPatients.PatientsListVM

@{
    string pageInfo = $"Страница {Model.CurrentPage + 1} из {Model.PagesCount}";
    string header = "Пациенты";
    ViewBag.Title = $"{header} - {pageInfo}";
}

    <div>
        <h1>@header</h1>

        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Фамилия</th>
                    <th scope="col">Имя</th>
                    <th scope="col">Отчество</th>
                    <th scope="col">Дата рождения</th>
                    <th scope="col">Пол</th>
                    <th scope="col">СНИЛС</th>
                    <th scope="col">Прививки</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var patient in Model.Patients)
                {
                    <tr class='clickable-row' data-href='@Url.Action("пациент", "пациенты", new { id = patient.IntId })'>
                        <td scope="row">@patient.LastName</td>
                        <td>@patient.FirstName</td>
                        <td>@patient.Patronymic</td>
                        <td>@patient.BirthDate.ToShortDateString()</td>
                        <td>@patient.Sex</td>
                        <td>@patient.InsuranceNumber</td>
                        <td>@patient.InoculationsCount</td>
                    </tr>
                }
            </tbody>
        </table>

        <p>
            <strong>@pageInfo</strong>
        </p>
        <nav aria-label="Страницы">
            <ul class="pagination">
                @for (int i = 0; i < Model.PagesCount; i++)
                {
                    int pageNum = i + 1;
                    int? pageParam = (pageNum == 1) ? null : (int?)pageNum;
                    string disabled = (Model.CurrentPage == i) ? "disabled" : null;
                    <li class="page-item @disabled">
                        <a class="page-link" href="@Url.Action("Index", new { page = pageParam })">@pageNum</a>
                    </li>
                }
            </ul>
        </nav>
    </div>

@section Styles {
    <environment include="Development">
        <link href="~/structured/patients/index.css" rel="stylesheet" />
    </environment>
    <environment exclude="Development">
        <link href="~/structured/patients/index.min.css" rel="stylesheet" />
    </environment>
}

@section Scripts {
    <script>
        jQuery(document).ready(function ($) {
            $(".clickable-row").click(function () {
                window.location = $(this).data("href");
            });
        });
    </script>
}